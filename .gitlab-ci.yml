image: node:20-alpine

stages:
  - deploy

pages:
  stage: deploy
  script:
    - npm install

    # Cria keys.js temporÃ¡rio usando variÃ¡veis do GitLab (protegidas)
    - |
      echo "/* ğŸ”‘ Arquivo gerado automaticamente no CI */" > public/js/keys.js
      echo "export const adminCredentials = { email: 'admin@teste.com', password: '123456' };" >> public/js/keys.js
      echo "export const firebaseConfig = ${FIREBASE_CONFIG};" >> public/js/keys.js

    - ls -la public/js
  artifacts:
    paths:
      - public
  only:
    - master
